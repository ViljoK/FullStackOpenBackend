(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(13),u=n.n(l),o=n(2),c=n(3),i=n.n(c),m="http://localhost:3001/api/persons",s=function(){return i.a.get(m).then(function(e){return e.data})},d=function(e){return i.a.post(m,e).then(function(e){return e.data})},f=function(e){return i.a.put("".concat(m,"/").concat(e.id),e).then(function(e){return e.data})},b=function(e){return i.a.delete("".concat(m,"/").concat(e)).then(function(e){return 200===e.status?"Poisto onnistui":"Poisto ep\xe4onnistui"})},E=function(e){var t=e.name,n=e.number,a=e.deletePerson,l=e.id;return r.a.createElement("tr",null,r.a.createElement("td",{className:"name"},t),r.a.createElement("td",{className:"phone"},n),r.a.createElement("td",null,r.a.createElement("button",{id:l,onClick:a},"Delete")))},p=function(e){var t=e.persons,n=e.filter,a=e.deletePerson,l=""===n?t:t.filter(function(e){var t=n.split(" "),a=!0,r=!1,l=void 0;try{for(var u,o=t[Symbol.iterator]();!(a=(u=o.next()).done);a=!0){var c=u.value;if(!e.name.toLowerCase().includes(c.toLowerCase())&&!e.number.includes(c))return!1}}catch(i){r=!0,l=i}finally{try{a||null==o.return||o.return()}finally{if(r)throw l}}return!0});return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,l.map(function(e){return r.a.createElement(E,{key:e.id,id:e.id,name:e.name,number:e.number,deletePerson:a})}))))},h=function(e){var t=e.handler,n=e.value,a=e.reff;return r.a.createElement("input",{ref:a,value:n,onChange:t})},v=function(e){var t=e.inputs,n=e.onsubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:n},r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement(h,{reff:e.ref,handler:e.handler,value:e.value})))}))),r.a.createElement("button",{type:"submit"},"Add")))},g=function(e){var t=e.inputs;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement(h,{handler:e.handler,value:e.value})))}))))},y=function(e){var t=e.message;if(null===t)return null;var n={margin:"20px 0 0 20px",padding:10,border:"1px solid black",borderRadius:10,width:500,backgroundColor:t.color};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:n},r.a.createElement("p",{style:{width:"95%",margin:"0 auto 0 auto",textAlign:"center"}},t.text)))},w=(n(37),function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],l=t[1],u=Object(a.useState)(""),c=Object(o.a)(u,2),i=c[0],m=c[1],E=Object(a.useState)(""),h=Object(o.a)(E,2),w=h[0],j=h[1],k=Object(a.useState)(""),x=Object(o.a)(k,2),O=x[0],P=x[1],S=Object(a.useState)(null),C=Object(o.a)(S,2),F=C[0],H=C[1];Object(a.useEffect)(function(){console.log("effect"),s().then(function(e){l(e),console.log("Haku valmis, l\xf6ytyi: ".concat(n.length," yhteystietoa"))})},[n.length]);var N=Object(a.useRef)(""),R=Object(a.useRef)(""),T=[{name:"Name",value:i,handler:function(e){m(e.target.value)},id:1,ref:N},{name:"Number",value:w,handler:function(e){j(e.target.value)},id:2,ref:R}],A=[{name:"Filter",value:O,handler:function(e){P(e.target.value)},id:1}];return r.a.createElement("div",{style:{width:400,margin:"0 auto 0 auto",border:"5px solid darkblue",borderRadius:10,padding:10}},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(g,{inputs:A}),r.a.createElement("h2",null,"Add new"),r.a.createElement(v,{inputs:T,onsubmit:function(e){if(e.preventDefault(),""!==i)if(""!==w){var t=n.find(function(e){return e.name===i});if(void 0!==t){if(window.confirm("Henkil\xf6 ".concat(t.name," l\xf6ytyy jo osoitekirjasta. \nHaluatko p\xe4ivitt\xe4\xe4 numeron?"))){var a={name:t.name,number:w,id:t.id};f(a).then(function(e){l([]),m(""),j(""),N.current.focus(),H({text:"".concat(e.name," tiedot p\xe4ivitetty"),color:"lightgreen"}),setTimeout(function(){H(null)},4e3)})}}else d({name:i,number:w}).then(function(e){l(n.concat(e)),m(""),j(""),N.current.focus(),H({text:"".concat(e.name," lis\xe4tty"),color:"lightgreen"}),setTimeout(function(){H(null)},4e3)})}else R.current.focus();else N.current.focus()}}),r.a.createElement("h2",null,"Contacts"),r.a.createElement(p,{persons:n,filter:O,deletePerson:function(e){e.persist();var t=n.findIndex(function(t){return t.id===parseInt(e.target.id)});console.log(n,t,e.target.id),window.confirm("Haluatko varmasti poistaa ".concat(n[t].name))&&(b(e.target.id).then(function(e){H({text:"Poisto onnistui",color:"lightgreen"}),setTimeout(function(){H(null)},4e3),console.log(e)}).catch(function(e){H({text:"Virhe: Henkil\xf6 oli jo poistettu",color:"red"}),setTimeout(function(){H(null)},4e3),console.log(e)}),l([]))}}),r.a.createElement(y,{message:F}))});u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.eb46d964.chunk.js.map