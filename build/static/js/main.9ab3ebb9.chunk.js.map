{"version":3,"sources":["services/persons.js","components/Contact.js","components/Contacts.js","components/Input.js","components/FormTable.js","components/InputTable.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newPerson","post","id","number","put","concat","delete","status","Contact","_ref","name","deletePerson","react_default","a","createElement","className","onClick","Contacts","persons","filter","contactsToShow","person","filterPieces","split","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","piece","value","toLowerCase","includes","err","return","Fragment","map","components_Contact","key","Input","handler","reff","type","ref","onChange","FormTable","inputs","onsubmit","onSubmit","input","components_Input","InputTable","Notification","message","divStyle","margin","padding","border","borderRadius","width","backgroundColor","color","style","textAlign","text","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","useEffect","console","log","personService","initialPersons","length","nameRef","useRef","numberRef","addStates","event","target","filterStates","components_InputTable","components_FormTable","preventDefault","existingPerson","find","obj","window","confirm","returnedPerson","current","focus","setTimeout","components_Contacts","persist","index","findIndex","parseInt","catch","error","components_Notification","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.9ab3ebb9.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\nconst update = (id, number) => {\n    const request = axios.put(`${baseUrl}/${id}`, {number : number})\n    return request.then(response => response.data)\n}\nconst drop = id => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => {\n        if (response.status === 200) {\n            return \"Poisto onnistui\"\n        }\n        else {\n            return \"Poisto epäonnistui\"\n        }\n    })\n}\n\nexport default {getAll, create, update, drop}","import React from 'react'\n\nconst Contact = ({name, number, deletePerson, id}) =>\n    <tr>\n        <td className='name'>{name}</td>\n        <td className='phone'>{number}</td>\n        <td>\n            <button id={id} onClick={deletePerson}>Delete</button>\n        </td>\n    </tr>\n\nexport default Contact","import React from 'react'\nimport Contact from './Contact'\n\nconst Contacts = ({persons, filter, deletePerson}) => {\n    let showAll = filter === ''\n\n    const contactsToShow = showAll\n        ? persons\n        : persons.filter(person => {\n            const filterPieces = filter.split(\" \")\n            for (let piece of filterPieces) {\n                if (!person.name.toLowerCase().includes(piece.toLowerCase()) && !person.number.includes(piece)) {\n                    return false\n                }\n            }\n            return true\n        })\n\n    const rows = () => contactsToShow.map(person =>\n        <Contact\n            key             = {person.id}\n            id              = {person.id}\n            name            = {person.name}\n            number          = {person.number}\n            deletePerson    = {deletePerson} \n        />\n    )\n    return (\n        <>\n            <table>\n                <tbody>\n                    {rows()}\n                </tbody>\n            </table>\n        </>\n    )\n}\n\nexport default Contacts","import React from 'react'\n\nconst Input = ({handler, value, reff}) => <input type='text' ref={reff} value={value} onChange={handler}/>\n\nexport default Input","import React from 'react'\nimport Input from './Input'\n\nconst FormTable = ({inputs, onsubmit}) => {\n    const rows = () => inputs.map(input =>\n        <tr key={input.id}>\n            <td>{input.name}</td>\n            <td>\n                <Input reff={input.ref} handler={input.handler} value={input.value} />\n            </td>\n        </tr>\n    )\n    return (\n        <>\n            <form onSubmit={onsubmit}>\n                <table>\n                    <tbody>\n                        {rows()}\n                    </tbody>\n                </table>\n                <button type={\"submit\"}>Add</button>\n            </form>\n        </>\n    )\n}\n\nexport default FormTable","import React from 'react'\nimport Input from './Input'\n\nconst InputTable = ({inputs}) => {\n    const rows = () => inputs.map(input =>\n        <tr key={input.id}>\n            <td>{input.name}</td>\n            <td>\n                <Input handler={input.handler} value={input.value} />\n            </td>\n        </tr>\n    )\n    return (\n        <>\n            <table>\n                <tbody>\n                {rows()}\n                </tbody>\n            </table>\n        </>\n    )\n}\n\nexport default InputTable","import React from 'react'\n\nconst Notification = ({message}) => {\n    if (message === null) {\n        return null\n    }\n    const divStyle = {\n        margin: '20px 0 0 20px',\n        padding: 10,\n        border: '1px solid black',\n        borderRadius: 10,\n        width: 500,\n        backgroundColor: message.color\n    }\n    const msgStyle = {\n        width: '95%',\n        margin: '0 auto 0 auto',\n        textAlign: 'center'\n    }\n\n    return (\n        <>\n            <div style={divStyle}>\n                <p style={msgStyle}>{message.text}</p>\n            </div>\n        </>\n    )\n}\n\nexport default Notification","import React, { useState, useRef, useEffect } from 'react'\nimport personService from './services/persons'\nimport Contacts from './components/Contacts'\nimport FormTable from \"./components/FormTable\"\nimport InputTable from \"./components/InputTable\"\nimport Notification from './components/Notification'\nimport './index.css'\n\nconst App = () => {\n    const [ persons, setPersons]        = useState([])\n    const [ newName, setNewName ]       = useState('')\n    const [ newNumber, setNewNumber ]   = useState('')\n    const [ filter, setFilter]          = useState('')\n    const [ message, setMessage]        = useState(null)\n\n    useEffect( () => {\n        console.log('effect')\n        personService\n            .getAll()\n            .then(initialPersons => {\n                setPersons(initialPersons)\n                console.log(`Haku valmis, löytyi: ${persons.length} yhteystietoa`)\n            })\n    }, [persons.length])\n\n    const nameRef = useRef('')\n    const numberRef = useRef('')\n\n    const addPerson = event => {\n        event.preventDefault()\n        if (newName === \"\") {\n            nameRef.current.focus()\n            return\n        }\n        else if (newNumber === \"\") {\n            numberRef.current.focus()\n            return\n        }\n        const existingPerson = persons.find(obj => obj.name === newName)\n        if (existingPerson !== undefined){\n            \n            if (window.confirm(`Henkilö ${existingPerson.name} löytyy jo osoitekirjasta. \\nHaluatko päivittää numeron?`)) {\n                \n                personService\n                    .update(existingPerson.id, newNumber)\n                    .then(returnedPerson => {\n                        setPersons([])\n                        setNewName('')\n                        setNewNumber('')\n                        nameRef.current.focus()\n                        setMessage({text: `${returnedPerson.name} updated`, color: 'lightgreen'})\n                        setTimeout(() => {\n                            setMessage(null)\n                        }, 4000)\n                    })\n            }\n        }else {\n            const newPerson = {\n                name:   newName,\n                number: newNumber\n            }\n            personService\n                .create(newPerson)\n                .then(returnedPerson => {\n                    setPersons(persons.concat(returnedPerson))\n                    setNewName('')\n                    setNewNumber('')\n                    nameRef.current.focus()\n                    setMessage({text: `${returnedPerson.name} added`, color: 'lightgreen'})\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 4000)\n                })\n        }\n    }\n\n    const deletePerson = event => {\n        event.persist()\n        const index = persons.findIndex(person => person.id === parseInt(event.target.id))\n        console.log(persons, index, event.target.id)\n        if (window.confirm(`Do you really want to delete ${persons[index].name}`)) {\n            personService\n                .drop(event.target.id)\n                .then(response => {\n                    setMessage({text: 'Delete successful', color: 'lightgreen'})\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 4000)\n                    console.log(response)\n                })\n                .catch(error => {\n                    setMessage({text: 'Error: Allready deleted', color: 'red'})\n                    setTimeout(() => {\n                        setMessage(null)\n                    }, 4000)\n                    console.log(error)\n                })\n            setPersons([])\n        }\n    }\n\n    const handleNameChange = event => {\n        setNewName(event.target.value)\n    }\n\n    const handleNumberChange = event => {\n        setNewNumber(event.target.value)\n    }\n\n    const handleFilterChange = event => {\n        setFilter(event.target.value)\n    }\n\n    const addStates = [\n        {\n            name:       \"Name\",\n            value:      newName,\n            handler:    handleNameChange,\n            id:         1,\n            ref:        nameRef,\n        },\n        {\n            name:       \"Number\",\n            value:      newNumber,\n            handler:    handleNumberChange,\n            id:         2,\n            ref:        numberRef,\n        },\n    ]\n\n    const filterStates = [\n        {\n            name:       \"Find\",\n            value:      filter,\n            handler:    handleFilterChange,\n            id:         1\n        }\n    ]\n\n    const appStyle = {\n        width: '90%',\n        margin: '0 auto 0 auto',\n        borderRadius: 10\n    }\n    const h1Style = {\n        textAlign: 'center'\n    }\n\n    return (\n        <div style={appStyle}>\n            <h1 style={h1Style}>Phonebook</h1>\n            <InputTable inputs={filterStates} />\n            <h2>Add new</h2>\n            <FormTable inputs={addStates} onsubmit={addPerson}/>\n            <h2>Contacts</h2>\n            <Contacts persons={persons} filter={filter} deletePerson={deletePerson}/>\n            <Notification message = {message} />\n        </div>\n    )\n\n}\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}